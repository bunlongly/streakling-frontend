@import 'tailwindcss';

/* === Tokens (unchanged) === */
@theme theme {
  --font-sans: var(--font-montserrat), system-ui, sans-serif;
  --color-primary: #9e55f7;
  --color-secondary: #447aee;
  --color-tertiary: #13b9a3;
  --color-background: #14141e; /* base dark; we'll override for dark mode below */
  --color-light: #ffffff;
  --color-dark: #0a0a0f;
  --color-surface: #1e1e29;
  --color-accent: #9e55f7;
  --color-success: #22c55e;
  --color-warn: #f59e0b;
  --color-danger: #ef4444;
}
@theme light {
  --font-sans: var(--font-montserrat), system-ui, sans-serif;
  --color-primary: #7b39e8;
  --color-secondary: #2d69ea;
  --color-tertiary: #10a991;
  --color-background: #ffffff;
  --color-light: #0a0a0f;
  --color-dark: #0a0a0f;
  --color-surface: #f7f7fb;
  --color-accent: #7b39e8;
  --color-success: #16a34a;
  --color-warn: #d97706;
  --color-danger: #dc2626;
}

/* ===== Runtime theme vars ===== */
:root {
  /* default assume dark until JS runs */
  --color-foreground: var(--color-light);
  --color-border: color-mix(in oklab, var(--color-light) 12%, transparent);
  color-scheme: dark;

  /* brand gradient defaults */
  --brand-spot-a: 18%;
  --brand-spot-b: 16%;
  --brand-spot-c: 14%;
  --brand-base-mix: 98%; /* deeper base for subtle glow in dark */
}

/* LIGHT MODE: stronger spots, lighter base wash */
html[data-theme='light'] {
  --color-foreground: var(--color-dark);
  --color-border: color-mix(in oklab, var(--color-dark) 12%, transparent);
  color-scheme: light;

  --brand-spot-a: 28%;
  --brand-spot-b: 24%;
  --brand-spot-c: 22%;
  --brand-base-mix: 92%;
}

/* DARK MODE: force the base to exactly #0d0d0d with gentle color spots */
html[data-theme='dark'] {
  --color-background: #0d0d0d; /* your requested dark base */
  --brand-spot-a: 18%;
  --brand-spot-b: 16%;
  --brand-spot-c: 14%;
  --brand-base-mix: 98%;
}

/* Prefer system only if user hasn't chosen yet */
@media (prefers-color-scheme: light) {
  :root:not([data-theme]) {
    --color-foreground: var(--color-dark);
    --color-border: color-mix(in oklab, var(--color-dark) 12%, transparent);
    color-scheme: light;
    --brand-spot-a: 28%;
    --brand-spot-b: 24%;
    --brand-spot-c: 22%;
    --brand-base-mix: 92%;
  }
}

/* ===== Base ===== */
* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
body {
  background: var(--color-background);
  color: var(--color-foreground);
  font-family: var(--font-sans, Arial, Helvetica, sans-serif);
}

/* ===== Theme-aware brand gradient (for whole app shell) ===== */
.app-shell {
  min-height: 100dvh;
  background: radial-gradient(
      1200px 600px at -10% -20%,
      color-mix(
        in oklab,
        var(--color-primary) var(--brand-spot-a),
        transparent
      ),
      transparent
    ),
    radial-gradient(
      1000px 500px at 110% 0%,
      color-mix(
        in oklab,
        var(--color-secondary) var(--brand-spot-b),
        transparent
      ),
      transparent
    ),
    radial-gradient(
      900px 500px at 50% 120%,
      color-mix(
        in oklab,
        var(--color-tertiary) var(--brand-spot-c),
        transparent
      ),
      transparent
    ),
    linear-gradient(
      180deg,
      color-mix(
        in oklab,
        var(--color-background) var(--brand-base-mix),
        transparent
      ),
      var(--color-background)
    );
  color: var(--color-foreground);
}

/* Subtle glowing surface (navbar / cards) */
.surface-brand {
  background: radial-gradient(
      900px 400px at 120% -20%,
      color-mix(
        in oklab,
        var(--color-primary) calc(var(--brand-spot-a) * 0.6),
        transparent
      ),
      transparent
    ),
    radial-gradient(
      700px 350px at -20% 120%,
      color-mix(
        in oklab,
        var(--color-secondary) calc(var(--brand-spot-b) * 0.5),
        transparent
      ),
      transparent
    ),
    var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
}

/* Your original card helper */
.card-surface {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
}

/* tiny helpers */
.bg-surface {
  background: var(--color-surface);
}
.text-foreground {
  color: var(--color-foreground);
}
.border-token {
  border-color: var(--color-border);
}
